!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("mage/translate")):"function"==typeof define&&define.amd?define(["jquery","mage/translate"],t):"object"==typeof exports?exports["salebar-widget"]=t(require("jquery"),require("mage/translate")):e["salebar-widget"]=t(e.jquery,e["mage/translate"])}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=313)}({0:function(t,n){t.exports=e},3:function(e,n){e.exports=t},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mgsSalebarWidget=void 0;var r=n(314),o=n(0);t.mgsSalebarWidget=function(e,t){new r.SalebarWidget(o(t),e)}},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(315);Object.defineProperty(t,"SalebarWidget",{enumerable:!0,get:function(){return r.default}}),n(316)},315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);n(3);var o=function(){function e(e,t){var n=this;this._$window=r(window),this._relatedElements=[],this._$element=e,this._options=r.extend({relatedElementsSelectors:"",fixedElementsBreakpoint:"1024",countdownLabelTranslations:{day:r.mage.__("Day"),days:r.mage.__("Days"),hour:r.mage.__("Hour"),hours:r.mage.__("Hours"),minute:r.mage.__("Min"),minutes:r.mage.__("Min"),second:r.mage.__("Sec"),seconds:r.mage.__("Sec")},countdownPlaceholderClass:"cs-salebar-widget__countdown",timerDate:0},t),this._options.relatedElementsSelectors.length&&(this._relatedElements=this._options.relatedElementsSelectors.split(",").reduce((function(e,t){var n=r(t).first();return n.length?e.push({$element:n,computedTopProperty:parseInt(window.getComputedStyle(r(t).get(0)).top,10)}):console.warn("Salebar: related "+t+" not found"),e}),[]),this._$window.on("resize orientationchange salebarLoaded breakpointChange",(function(e){return n._resizeHandler(e)}))),this._options.timerDate>0&&(this._timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,this._initTimer()),this._$window.trigger("salebarLoaded")}return e.prototype._resizeHandler=function(e){(breakpoint.current>parseInt(this._options.fixedElementsBreakpoint,10)||!this._cachedElementHeight||this._cachedElementHeight!==this._$element.outerHeight()||"breakpointChange"===e.type)&&(this._cachedElementHeight=this._$element.outerHeight(),this._adjustRelatedElementsOffset())},e.prototype._adjustRelatedElementsOffset=function(){var e=this;this._relatedElements.forEach((function(t){t.$element.css({top:""}),"fixed"===t.$element.css("position")&&t.$element.css({top:t.computedTopProperty+e._cachedElementHeight})}))},e.prototype._initTimer=function(){this._renderTimer(),this._$element.addClass("cs-salebar-widget--loaded"),this._timerInterval=setInterval(this._renderTimer.bind(this),1e3)},e.prototype._renderTimer=function(){var e=this._getRemainingTime();if(e.total<0)return clearInterval(this._timerInterval),void this._$element.addClass("cs-salebar-widget--finished");var t=e.days+" "+this._setCountdownLabel(e.days,"day")+" "+e.hours+" "+this._setCountdownLabel(e.hours,"hour")+" "+e.minutes+" "+this._setCountdownLabel(e.minutes,"minute")+" "+e.seconds+" "+this._setCountdownLabel(e.seconds,"second");r("."+this._options.countdownPlaceholderClass).text(t)},e.prototype._getRemainingTime=function(){var e=this._options.timerDate-this._getCurrentTime();return{total:e,days:Math.floor(e/86400),hours:Math.floor(e/3600%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}},e.prototype._getCurrentTime=function(){return Math.floor((Date.now()-this._timezoneOffset)/1e3)},e.prototype._setCountdownLabel=function(e,t){return 1===e?this._options.countdownLabelTranslations[t]:this._options.countdownLabelTranslations[t+"s"]},e}();t.default=o},316:function(e,t,n){"use strict";n.r(t)}})}));