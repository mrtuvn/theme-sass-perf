!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("mage/translate")):"function"==typeof define&&define.amd?define(["jquery","mage/translate"],t):"object"==typeof exports?exports["daily-deal-teaser"]=t(require("jquery"),require("mage/translate")):e["daily-deal-teaser"]=t(e.jquery,e["mage/translate"])}(window,(function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=232)}({0:function(t,n){t.exports=e},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);n(3);var s=function(){function e(e,t){if(this._options={namespace:"cs-",get countdownTemplate(){return'<span class="'+this.namespace+"dailydeal__countdown-element "+this.namespace+'dailydeal__countdown-element--special">\n                    <img class="inline-svg '+this.namespace+'dailydeal__countdown-icon" data-src="'+requirejs.toUrl("images/icons/clock.svg")+'" alt="">\n                </span>\n                <span class="'+this.namespace+'dailydeal__countdown-element">\n                    <span class="'+this.namespace+'dailydeal__countdown-value">%d%</span>\n                    <span class="'+this.namespace+'dailydeal__countdown-label">%ld%</span>\n                </span>\n                <span class="'+this.namespace+'dailydeal__countdown-element">\n                    <span class="'+this.namespace+'dailydeal__countdown-value">%h%</span>\n                    <span class="'+this.namespace+'dailydeal__countdown-label">%lh%</span>\n                </span>\n                <span class="'+this.namespace+'dailydeal__countdown-element">\n                    <span class="'+this.namespace+'dailydeal__countdown-value">%m%</span>\n                    <span class="'+this.namespace+'dailydeal__countdown-label">%lm%</span>\n                </span>\n                <span class="'+this.namespace+'dailydeal__countdown-element">\n                    <span class="'+this.namespace+'dailydeal__countdown-value">%s%</span>\n                    <span class="'+this.namespace+'dailydeal__countdown-label">%ls%</span>\n                </span>'},get countdownSelector(){return"."+this.namespace+"dailydeal__countdown"},get tileSelector(){return"."+this.namespace+"product-tile"},get tileContainerSelector(){return"."+this.namespace+"product-tile__container"},get tilePriceContainerSelector(){return"."+this.namespace+"product-tile__main"},get pdpPriceContainerSelector(){return"."+this.namespace+"price--pdp"},get pdpSaleBlockSelector(){return"."+this.namespace+"product-sale-block"},get defaultPriceSelector(){return".price-final_price_without_daily_deal"},get dailyDealPriceSelector(){return".price-final_price"},get badgeContainerSelector(){return"."+this.namespace+"product-tile__badges"},get defaultDiscountBadgeSelector(){return"."+this.namespace+"dailydeal__badge--discount"},get dailyDealDiscountBadgeSelector(){return"."+this.namespace+"dailydeal__badge--dd-discount"},get dailyDealAmountBadgeSelector(){return"."+this.namespace+"dailydeal__badge--amount"},dailyDealSelector:".cs-dailydeal",timeDisplayPrecision:1,labels:{day:"Day",days:"Days",hour:"Hour",hours:"Hours",minute:"Min",minutes:"Min",second:"Sec",seconds:"Sec"},updateLabels:!1},0!==e.length&&(this._$element=e,this._options=i.extend({},this._options,t),this._$countdown=this._$element.find(this._options.countdownSelector),0!==this._$countdown.length)){if(this._$tile=this._$element.closest(this._options.tileSelector).first(),this._$pdpPriceContainer=this._$element.closest(this._options.pdpSaleBlockSelector).find(this._options.pdpPriceContainerSelector),this._$tilePriceContainer=this._$element.closest(this._options.tileContainerSelector).find(this._options.tilePriceContainerSelector),this._$badgeContainer=this._$element.closest(this._options.tileContainerSelector).find(this._options.badgeContainerSelector),this._$tileDefaultPrice=this._$tilePriceContainer.find(this._options.defaultPriceSelector).first(),this._$tileDailyDealPrice=this._$tilePriceContainer.find(this._options.dailyDealPriceSelector).first(),this._$pdpDefaultPrice=this._$pdpPriceContainer.find(this._options.defaultPriceSelector).first(),this._$pdpDailyDealPrice=this._$pdpPriceContainer.find(this._options.dailyDealPriceSelector).first(),this._$defaultDiscountBadge=this._$badgeContainer.find(this._options.defaultDiscountBadgeSelector),this._$dailyDealDiscountBadge=this._$badgeContainer.find(this._options.dailyDealDiscountBadgeSelector),this._$dailyDealAmountBadge=this._$badgeContainer.find(this._options.dailyDealAmountBadgeSelector),this._endTime=this._$countdown.data("dailydeal-end"),!this._endTime||this._endTime-this._getCurrentTime()<=0)return this._hideDailydeal(!0),void(this._options.expiredHandler&&"function"==typeof this._options.expiredHandler&&this._options.expiredHandler(this));this._template="",this._clock="",this._renderClock(),this._countdownElements=this._getCountdownElements(),this._initializeCountdown(),this._showDailydeal()}}return e.prototype._showDailydeal=function(){var e=null,t=null,n=null,s=null,a=null;this._isTile()?(s=this._$tileDailyDealPrice,a=this._$tileDefaultPrice,e=this._$dailyDealDiscountBadge,t=this._$dailyDealAmountBadge,n=this._$defaultDiscountBadge,i(this._$tile).addClass("cs-product-tile--dailydeal")):(s=this._$pdpDailyDealPrice,a=this._$pdpDefaultPrice),this._updateContainers(),this._$element.show(),s.addClass("price-box--visible"),a.hide(),e&&n&&(e.css("display",""),n.hide()),t&&t.length&&t.css("display","")},e.prototype._hideDailydeal=function(e){void 0===e&&(e=!1);var t=null,n=null,s=null,a=null,o=null;this._isTile()?(a=this._$tileDailyDealPrice,o=this._$tileDefaultPrice,t=this._$dailyDealDiscountBadge,n=this._$dailyDealAmountBadge,s=this._$defaultDiscountBadge,i(this._$tile).removeClass("cs-product-tile--dailydeal")):(a=this._$pdpDailyDealPrice,o=this._$pdpDefaultPrice),this._updateContainers(),this._$element.hide(),a.removeClass("price-box--visible").hide(),o.addClass("price-box--visible"),!this._isTile()&&e&&a.addClass("price-box--visible"),t&&s&&(t.hide(),s.css("display","")),n&&n.length&&n.hide()},e.prototype._updateContainers=function(){this._updatePdpPriceContainer(),this._updateBadgeContainer()},e.prototype._updatePdpPriceContainer=function(){var e=this._$pdpPriceContainer;this._isTile()||e.hasClass(this._options.namespace+"price--pdp_dailydeal-countdown")||e.addClass(this._options.namespace+"price--pdp_dailydeal-countdown")},e.prototype._updateBadgeContainer=function(){var e=this._$badgeContainer;this._isTile()&&e.find("."+this._options.namespace+"product-tile__badge--discount").length&&(e.hasClass(this._options.namespace+"product-tile__badges--dailydeal-countdown")||e.addClass(this._options.namespace+"product-tile__badges--dailydeal-countdown"))},e.prototype._isTile=function(){return this._$element.hasClass(this._options.namespace+"dailydeal--tile")},e.prototype._getCurrentTime=function(){return Math.floor(Date.now()/1e3)},e.prototype._getTimeRemaining=function(){var e=this._endTime-this._getCurrentTime();return{total:e,days:Math.floor(e/86400),hours:Math.floor(e/3600%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}},e.prototype._getFormattedTimeElement=function(e){return 2===this._options.timeDisplayPrecision?e>9?""+e:"0"+e:""+e},e.prototype._getCountdownLabel=function(e,t){var n=this._$element.closest(this._options.dailyDealSelector);return this._options.updateLabels&&1===e?n.attr("data-phrase-"+t):n.attr("data-phrase-"+t+"s")},e.prototype._getCountdownElements=function(){return{days:{valueHolder:this._$countdown.find(".csdd-d"),labelHolder:this._$countdown.find(".csdd-ld")},hours:{valueHolder:this._$countdown.find(".csdd-h"),labelHolder:this._$countdown.find(".csdd-lh")},minutes:{valueHolder:this._$countdown.find(".csdd-m"),labelHolder:this._$countdown.find(".csdd-lm")},seconds:{valueHolder:this._$countdown.find(".csdd-s"),labelHolder:this._$countdown.find(".csdd-ls")}}},e.prototype._renderClock=function(){var e=this._options.countdownTemplate,t=this._getTimeRemaining();e=(e=(e=(e=(e=(e=(e=(e=e.replace("%d%",'<span class="csdd-d">'+this._getFormattedTimeElement(t.days)+"</span>")).replace("%h%",'<span class="csdd-h">'+this._getFormattedTimeElement(t.hours)+"</span>")).replace("%m%",'<span class="csdd-m">'+this._getFormattedTimeElement(t.minutes)+"</span>")).replace("%s%",'<span class="csdd-s">'+this._getFormattedTimeElement(t.seconds)+"</span>")).replace("%ld%",'<span class="csdd-ld">'+this._getCountdownLabel(t.days,"day")+"</span>")).replace("%lh%",'<span class="csdd-lh">'+this._getCountdownLabel(t.hours,"hour")+"</span>")).replace("%lm%",'<span class="csdd-lm">'+this._getCountdownLabel(t.minutes,"minute")+"</span>")).replace("%ls%",'<span class="csdd-ls">'+this._getCountdownLabel(t.seconds,"second")+"</span>"),this._$countdown.html(e),this._setUniqueIds()},e.prototype._setUniqueIds=function(){var e=999*Math.random()<<0;this._$countdown.addClass("countdown-"+e+"-"+this._endTime)},e.prototype._daysLeft=function(e){this._$countdown.attr("data-days",e)},e.prototype._updateClock=function(){var e=this._getTimeRemaining();if(e.total<0)return clearInterval(this._clock),this._hideDailydeal(),void(this._options.expiredHandler&&"function"==typeof this._options.expiredHandler&&this._options.expiredHandler(this));this._countdownElements.days.valueHolder.text(this._getFormattedTimeElement(e.days)),this._countdownElements.hours.valueHolder.text(this._getFormattedTimeElement(e.hours)),this._countdownElements.minutes.valueHolder.text(this._getFormattedTimeElement(e.minutes)),this._countdownElements.seconds.valueHolder.text(this._getFormattedTimeElement(e.seconds)),this._options.updateLabels&&(this._countdownElements.days.labelHolder.html(this._getCountdownLabel(e.days,"day")),this._countdownElements.hours.labelHolder.html(this._getCountdownLabel(e.hours,"hour")),this._countdownElements.minutes.labelHolder.html(this._getCountdownLabel(e.minutes,"minute")),this._countdownElements.seconds.labelHolder.html(this._getCountdownLabel(e.seconds,"second")));var t=this._$countdown.attr("class").split(" ").pop();i("."+t).length>1&&i("."+t).last().html(this._$countdown.html()),this._daysLeft(e.days)},e.prototype._initializeCountdown=function(){var e=this;this._clock=setInterval((function(){e._updateClock()}),1e3),this._options.afterRenderCallback&&"function"==typeof this._options.afterRenderCallback&&this._options.afterRenderCallback(this)},e}();t.default=s},232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ccDailyDealTeaser=void 0;var i=n(0),s=n(233);t.ccDailyDealTeaser=function(e,t){var n=i.extend({},e,{updateLabels:!0,afterRenderCallback:function(e){e&&e._$element.length&&e._$element.parents(".cs-daily-deal-teaser").addClass("cs-daily-deal-teaser--active")},expiredHandler:function(e){e&&e._$element.length&&e._$element.parents(".cs-daily-deal-teaser").removeClass("cs-daily-deal-teaser--active")}});new s.Dailydeal(i(t),n)}},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(126);Object.defineProperty(t,"Dailydeal",{enumerable:!0,get:function(){return i.default}}),n(234)},234:function(e,t,n){"use strict";n.r(t)},3:function(e,n){e.exports=t}})}));